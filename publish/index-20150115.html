<!DOCTYPE html>
<html lang="en" dir="ltr" typeof="bibo:Document " prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">
<head><meta lang="" property="dc:language" content="en">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <title>Packaging on the Web</title>
    
    
  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;   
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;    
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title , div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title { color: #2b2; }
div.warning-title { color: #f22; }
div.issue-title span, div.note-title span, div.warning-title span {
    text-transform: uppercase;
}
div.note, div.issue, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
.issue, .note, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note , div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.issue, span.warning { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note {
    border-color: #52e052;
    background: #e9fbe9;
}

.warning {
    border-color: #f11;
    border-right-width: .2em;
    border-top-width: .2em;
    border-bottom-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}
</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/W3C-WD"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--></head>
  <body class="h-entry" style="" role="document" id="respecDocument"><div class="head" role="contentinfo" id="respecHeader">
  <p>
      
        
            <a href="http://www.w3.org/"><img width="72" height="48" src="https://www.w3.org/Icons/w3c_home" alt="W3C"></a>
        
      
  </p>
  <h1 class="title p-name" id="title" property="dcterms:title">Packaging on the Web</h1>
  
  <h2 id="w3c-first-public-working-draft-15-january-2015"><abbr title="World Wide Web Consortium">W3C</abbr> First Public Working Draft <time property="dcterms:issued" class="dt-published" datetime="2015-01-15">15 January 2015</time></h2>
  <dl>
    
      <dt>This version:</dt>
      <dd><a class="u-url" href="http://www.w3.org/TR/2015/WD-web-packaging-20150115/">http://www.w3.org/TR/2015/WD-web-packaging-20150115/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/TR/web-packaging/">http://www.w3.org/TR/web-packaging/</a></dd>
    
    
      <dt>Latest editor's draft:</dt>
      <dd><a href="http://w3ctag.github.io/packaging-on-the-web/">http://w3ctag.github.io/packaging-on-the-web/</a></dd>
    
    
    
    
    
    
    
    <dt>Editor:</dt>
    <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Jeni Tennison</span>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://theodi.org/">Open Data Institute</a></span>
<span property="rdf:rest" resource="rdf:nil"></span>
</dd>

    
    
      
        
          <dt>Repository:</dt>
          
             
                
                  <dd>
                    <a href="https://github.com/w3ctag/packaging-on-the-web">
                      We are on Github.
                    </a>
                  </dd>
                
             
                
                  <dd>
                    <a href="https://github.com/w3ctag/packaging-on-the-web/issues">
                      File a bug.
                    </a>
                  </dd>
                
             
                
                  <dd>
                    <a href="https://github.com/w3ctag/packaging-on-the-web/commits/gh-pages">
                      Commit history.
                    </a>
                  </dd>
                
             
          
        
      
    
  </dl>
  
  
  
  
    
      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2015
        
        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), 
        
        All Rights Reserved.
        
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
        
          <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
        
        rules apply.
      </p>
    
  
  <hr>
</div>
    <section id="abstract" class="introductory" property="dc:abstract"><h2 id="h-abstract" resource="#h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>
      <p>
        This document describes an approach for creating packages of files for use on the web. The approach is to package them using a new <code>application/package</code> media type. To access packages related to other files on the web, clients that understand packages of files look for a <code>Link</code> header or (in HTML documents) a <code>&lt;link&gt;</code> element with a new link relation of <code>package</code>. Other formats may define format-specific mechanisms for locating related packages.
      </p>
    </section><section id="sotd" class="introductory"><h2 id="h-sotd" resource="#h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
  
    
      
        <p>
          <em>This section describes the status of this document at the time of its publication.
          Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the
          latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
          http://www.w3.org/TR/.</em>
        </p>
        
        
      <p>
        The Technical Architecture Group has put together this draft for comment and to indicate future direction. It is likely this draft will be handed on to a task force or working group to go through the rest of the process.
      </p>
      <p>
        The technical proposals within this draft (namely new media type and link relation) will eventually require review and registration at IETF. That process has not started yet.
      </p>
    
        
        <p>
          This document was published jointly by the <a href="http://www.w3.org/2008/webapps/">Web Applications Working Group</a> and the <a href="http://www.w3.org/2001/tag/">Technical Architecture Group</a> as a First Public Working Draft.
          
            This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.
          
          
            If you wish to make comments regarding this document, please send them to 
	     <a href="mailto:www-tag@w3.org">www-tag@w3.org</a> 
            (<a href="mailto:www-tag-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="http://lists.w3.org/Archives/Public/www-tag/">archives</a>) and
            <a href="mailto:public-webapps@w3.org">public-webapps@w3.org</a> 
            (<a href="mailto:public-webapps-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="http://lists.w3.org/Archives/Public/public-webapps/">archives</a>).
          
          
          
          
          
            
            All comments are welcome.
            
          
        </p>
        
        
        
          <p>
            Publication as a First Public Working Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr>
            Membership. This is a draft document and may be updated, replaced or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other than work in
            progress.
          </p>
        
        
        
        <p>
          
            This document was produced by groups operating under the 
            <a id="sotd_patent" property="w3p:patentRules" href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
            Policy</a>.
          
          
          
              <abbr title="World Wide Web Consortium">W3C</abbr> maintains public lists of any patent disclosures (<a href="http://www.w3.org/2001/tag/disclosures" rel="disclosure">Technical Architecture Group</a>, <a href="http://www.w3.org/2004/01/pp-impl/42538/status" rel="disclosure">Web Applications Working Group</a>)
            
            made in connection with the deliverables of the groups; those pages also include
            instructions for disclosing a patent. An individual who has actual knowledge of a patent
            which the individual believes contains
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
            Claim(s)</a> must disclose the information in accordance with
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
            6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
          
        </p>
        
          <p>This document is governed by the <a id="w3c_process_revision" href="http://www.w3.org/2014/Process-20140801/">1 August 2014 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
          </p>
        
        
      
    
  
</section><section id="toc"><h2 class="introductory" id="h-toc" resource="#h-toc"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2><ul class="toc" role="directory" id="respecContents"><li class="tocline"><a href="#intro" class="tocxref"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a href="#using-packages" class="tocxref"><span class="secno">2. </span>Using Packages</a><ul class="toc"><li class="tocline"><a href="#populating-caches" class="tocxref"><span class="secno">2.1 </span>Populating Caches</a><ul class="toc"><li class="tocline"><a href="#example-scenario" class="tocxref"><span class="secno">2.1.1 </span>Example Scenario</a></li><li class="tocline"><a href="#guidelines" class="tocxref"><span class="secno">2.1.2 </span>Guidelines</a></li></ul></li><li class="tocline"><a href="#installing-web-applications" class="tocxref"><span class="secno">2.2 </span>Installing Web Applications</a><ul class="toc"><li class="tocline"><a href="#example-scenario-1" class="tocxref"><span class="secno">2.2.1 </span>Example Scenario</a></li><li class="tocline"><a href="#guidelines-1" class="tocxref"><span class="secno">2.2.2 </span>Guidelines</a></li></ul></li><li class="tocline"><a href="#distributing-code-libraries" class="tocxref"><span class="secno">2.3 </span>Distributing Code Libraries</a><ul class="toc"><li class="tocline"><a href="#example-scenario-2" class="tocxref"><span class="secno">2.3.1 </span>Example Scenario</a></li><li class="tocline"><a href="#guidelines-2" class="tocxref"><span class="secno">2.3.2 </span>Guidelines</a></li></ul></li><li class="tocline"><a href="#downloading-data-for-local-processing" class="tocxref"><span class="secno">2.4 </span>Downloading Data For Local Processing</a><ul class="toc"><li class="tocline"><a href="#example-scenario-3" class="tocxref"><span class="secno">2.4.1 </span>Example Scenario</a></li><li class="tocline"><a href="#guidelines-3" class="tocxref"><span class="secno">2.4.2 </span>Guidelines</a></li></ul></li></ul></li><li class="tocline"><a href="#streamable-package-format" class="tocxref"><span class="secno">3. </span>Streamable Package Format</a><ul class="toc"><li class="tocline"><a href="#package-header" class="tocxref"><span class="secno">3.1 </span>Package Header</a></li><li class="tocline"><a href="#parts" class="tocxref"><span class="secno">3.2 </span>Parts</a></li><li class="tocline"><a href="#boundaries" class="tocxref"><span class="secno">3.3 </span>Boundaries</a></li><li class="tocline"><a href="#fragment-identifiers" class="tocxref"><span class="secno">3.4 </span>Fragment Identifiers</a></li><li class="tocline"><a href="#security-considerations" class="tocxref"><span class="secno">3.5 </span>Security Considerations</a></li><li class="tocline"><a href="#creating-and-publishing-packages" class="tocxref"><span class="secno">3.6 </span>Creating and Publishing Packages</a><ul class="toc"><li class="tocline"><a href="#compression" class="tocxref"><span class="secno">3.6.1 </span>Compression</a></li><li class="tocline"><a href="#part-ordering" class="tocxref"><span class="secno">3.6.2 </span>Part Ordering</a></li><li class="tocline"><a href="#part-headers" class="tocxref"><span class="secno">3.6.3 </span>Part Headers</a></li></ul></li></ul></li><li class="tocline"><a href="#package-link-relation" class="tocxref"><span class="secno">4. </span><code>package</code> Link Relation</a><ul class="toc"><li class="tocline"><a href="#package-scope" class="tocxref"><span class="secno">4.1 </span>Package Scope</a></li></ul></li><li class="tocline"><a href="#iana-considerations" class="tocxref"><span class="secno">5. </span>IANA Considerations</a><ul class="toc"><li class="tocline"><a href="#application-package-media-type-registration" class="tocxref"><span class="secno">5.1 </span><code>application/package</code> Media Type Registration</a></li><li class="tocline"><a href="#package-link-relation-registration" class="tocxref"><span class="secno">5.2 </span><code>package</code> Link Relation Registration</a></li></ul></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">A. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">A.1 </span>Normative references</a></li><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">A.2 </span>Informative references</a></li></ul></li></ul></section>
    
    <section id="intro" typeof="bibo:Chapter" resource="#intro" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-intro" resource="#h-intro"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Introduction</span></h2>
      <p>
        Today's websites rely on multiple files. If a user visits <a href="http://www.bbc.co.uk/">http://www.bbc.co.uk/</a> they will need to download about 160 files to view the page in its entirety. The HTML page they download at <a href="http://www.bbc.co.uk/">http://www.bbc.co.uk/</a> contains references to stylesheets, scripts, images and other files, each of which may contain references to further files themselves. Many of these resources will themselves have been originally developed as separate resources and merged to avoid the client having to make multiple requests: CSS and Javascript files are concatenated together; images are merged and used with CSS spriting. These concatenation and spriting techniques are rudimentary forms of packaging for performance.
      </p>
      <p>
        The web is becoming more modular. <a href="http://www.w3.org/TR/components-intro/">Web components</a> [<cite><a class="bibref" href="#bib-components-intro">components-intro</a></cite>] provide developers with the means to create reusable components, such as date pickers, carousels or tab layouts, that can be reused in other web pages. These components are defined through HTML, Javascript and CSS but may also require other resources such as images and data to operate. Meanwhile <a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-modules">ES2015 Modules</a> [<cite><a class="bibref" href="#bib-ECMASCRIPT">ECMASCRIPT</a></cite>] will result in smaller, self-contained and cross-referencing Javascript files. This modularity requires packaging for ease of distribution.
      </p>
      <p>
        Many websites are no longer simple providers of content: they are applications that use web technologies to deliver their user interface. Initiatives such as <a href="http://www.mozilla.org/en-US/firefox/os/">Firefox OS</a> and <a href="http://www.chromium.org/chromium-os">Chrome OS</a> demonstrate the potential of trusted, installable applications built with web technologies. To be used in this way, applications must be self-contained packages of resources that can be tested and signed.
      </p>
      <p>
        Packages of content and data are not only useful for web applications. <a href="http://www.w3.org/dpub/">Digital publishing</a> requires the packaging of content, stylesheets, fonts and media. Data publication typically requires data and metadata to be packaged together. Archiving requires the packaging of whole websites into dated bundles.
      </p>
      <p>
        There are existing and upcoming solutions to these problems. On the performance side, <a href="http://tools.ietf.org/html/draft-ietf-httpbis-http2/">HTTP/2</a> includes the facility to push multiple representations to clients as the result of a single request. Providing packages is orthogonal to the use of HTTP/2. Developers who cannot yet use HTTP/2 may find that using packages can provide performance benefits through reducing numbers of requests. All developers will benefit from being able to package modules and components in ways that make them easy to deliver and reuse.
      </p>
      <p>
        There are also a plethora of packaging formats, such as:
      </p>
      <ul>
        <li><a href="http://www.w3.org/TR/widgets/">Packaged Web Apps (Widgets)</a></li>
        <li><a href="http://www.idpf.org/epub3/latest/ocf">Open Container Format</a></li>
        <li><a href="https://developers.google.com/public-data/">Dataset Publishing Language</a></li>
        <li><a href="http://dataprotocols.org/tabular-data-package/">Tabular Data Package</a></li>
        <li><a href="http://maf.mozdev.org/maff-specification.html">Mozilla Archive Format</a></li>
        <li><a href="http://tools.ietf.org/html/rfc2557">MHTML (RFC 2557)</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Webarchive">Webarchive format</a></li>
        <li><a href="http://www.digitalpreservation.gov/formats/fdd/fdd000236.shtml">WARC</a></li>
      </ul>
      <p>
        Most of these formats are based on zips, which have three main drawbacks:
      </p>
      <ul>
        <li>
          <strong>Zips are streamable, but it's a bit of a hack.</strong> The <em>central directory record</em>, which lists the valid files within the zip archive, appears at the <em>end</em> of the zip. It's possible to use per-Entry file names, but conflicts with the central directory record are possible and the cdr is authoritative. Streaming zip files commonly might exascerbate the potentital for mismatched file entries causing different visible behavior between consumers of packages.
        </li>
        <li>
          <strong>Zips are hard to create well.</strong> Ordering of files within packages can be important. But the typical method to create a zip is simply to use the built-in operating system facility to do so, which gives no control over this ordering.
        </li>
        <li>
          <strong>Zips have restricted metadata.</strong> While there are mechanisms for supplying additional information about individual files within the package (through <em>extra fields</em>), they are not sufficient for extended metadata. Each extra field is a 2-byte ID code with a 2-byte value. The list of valid core and extended ID codes are provided within section 4.5 and 4.6 of the <a href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT">zip definition</a>. The file header within the zip, which includes these extra fields, must not exceed 64k in size.
        </li>
      </ul>
      <p>
        This document specifies a new format for packages which does not have these drawbacks: the Streamable Package Format defined in <a class="sectionRef sec-ref" href="#streamable-package-format">section <span class="secno">3.</span> <span class="sec-title">Streamable Package Format</span></a>. It defines a <code>package</code> link relation to point to packages from other resources in <a class="sectionRef sec-ref" href="#package-link-relation">section <span class="secno">4.</span> <span class="sec-title">package Link Relation</span></a>. But first, in <a class="sectionRef sec-ref" href="#using-packages">section <span class="secno">2.</span> <span class="sec-title">Using Packages</span></a>, this document describes patterns of use for packages that address the requirements described in this introduction.
      </p>
    </section>
    <section class="informative" id="using-packages" typeof="bibo:Chapter" resource="#using-packages" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-using-packages" resource="#h-using-packages"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Using Packages</span></h2><p><em>This section is non-normative.</em></p>
      <p>
        This section demonstrates how package-aware applications could use packages.
      </p>
      <section id="populating-caches" typeof="bibo:Chapter" resource="#populating-caches" property="bibo:hasPart">
        <h3 id="h-populating-caches" resource="#h-populating-caches"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.1 </span>Populating Caches</span></h3>
        <p>
          Packages can be used to populate caches associated with multiple URLs without making multiple requests. This may be beneficial in some cases to avoid the latency involved in making multiple connections, particularly for servers and clients that don't support SPDY or HTTP/2.
        </p>
        <div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note1"><span>Note</span></div><p class="">
          Packaging can also damage performance: packages may be bloated by more resources than are actually necessary for the requested page, or may be badly ordered such that resources that are required early in the display of a web page are provided late in a package. Packaging is not a silver bullet for performance issues.
        </p></div>
        <section id="example-scenario" typeof="bibo:Chapter" resource="#example-scenario" property="bibo:hasPart">
          <h4 id="h-example-scenario" resource="#h-example-scenario"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.1.1 </span>Example Scenario</span></h4>
          <p>
            In this scenario, a browser is pointed at the page <code>http://example.org/shop</code> which returns the HTML:
          </p>
          <div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
    </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"package"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/lib/brand.pack"</span><span class="pln"> </span><span class="atn">scope</span><span class="pun">=</span><span class="atv">"/lib/brand/"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/lib/brand/main.css"</span><span class="tag">&gt;</span><span class="pln">
    ...
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  ...
</span><span class="tag">&lt;/html&gt;</span></pre></div>
          <p>
            As it starts to receive the page, the browser starts to send off requests for other resources. It recognises the <code>rel="package"</code> links (described in <a href="#package-link-relation" class="sectionRef sec-ref">section <span class="secno">4.</span> <span class="sec-title">package Link Relation</span></a>) as meaning that the files referenced by those links contain useful resources for the display of the page. It starts to download them, taking note of their scope (described in <a href="#package-scope" class="sectionRef sec-ref">section <span class="secno">4.1</span> <span class="sec-title">Package Scope</span></a>).
          </p>
          <p>
            When the browser comes to download the resource <code>http://example.org/lib/brand/style.css</code>, it checks to see if that resource is included in the scope of a package. In this case, the URL starts with <code>http://example.org/lib/brand/</code> so the browser can guess that it is included in the <code>http://example.org/lib/brand.pack</code> package and not make a separate request for the stylesheet.
          </p>
          <p>
            The <code>http://example.org/lib/brand.pack</code> package contains the main CSS stylesheet, but also font files and images that are used as background images within the CSS:
          </p>
          <div class="example"><div class="example-title"><span>Example 2</span></div><pre class="example">Content-Location: http://example.org/lib/brand.pack
Expires: Mon, 07 Apr 2014 00:00:00 GMT

--mqt84qpfq8xf3qpmdicdma;
Content-Location: brand/main.css
Content-Type: text/css

@font-face {
  font-family: 'Shop';
  src: url('shop.woff') format('woff');
}

body {
  background-image: url('images/bg.jpg') no-repeat center center fixed;
  ...
}

--mqt84qpfq8xf3qpmdicdma;
Content-Location: brand/shop.woff
Content-Type: application/font-woff
Expires: Mon, 06 Apr 2015 00:00:00 GMT

...
--mqt84qpfq8xf3qpmdicdma;
Content-Location: brand/images/bg.jpg
Content-Type: image/jpeg
Expires: Mon, 06 Apr 2015 00:00:00 GMT

...
--mqt84qpfq8xf3qpmdicdma;--</pre></div>
          <p>
            As the package is loaded, the browser cache is populated with the content of <code>http://example.org/lib/brand/main.css</code>, <code>http://example.org/lib/brand/shop.woff</code> and <code>http://example.org/lib/brand/images/bg.jpg</code>. Because the package is streamed, the browser can use the CSS straight away, but the supporting resources are loaded rapidly after.
          </p>
          <p>
            A couple of days later, on revisiting the page, the browser notices that its cached copy of <code>http://example.org/lib/brand/main.css</code> has expired. It requests that CSS file separately to update its cache. There is no need to request the font or the background image as these haven't expired.
          </p>
        </section>
        <div class="issue"><div class="issue-title" aria-level="4" role="heading" id="h-issue1"><span>Issue 1</span></div><p class="">
          If we progress further with the <code>2NN Contents of Related</code> status code, it would be good to add a scenario that shows that in action.
        </p></div>
        <section id="guidelines" typeof="bibo:Chapter" resource="#guidelines" property="bibo:hasPart">
          <h4 id="h-guidelines" resource="#h-guidelines"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.1.2 </span>Guidelines</span></h4>
          <p>
            Package-aware caches <em class="rfc2119" title="SHOULD">SHOULD</em> populate their caches using packages that are indicated through:
          </p>
          <ul>
            <li>a <code>rel=package</code> <code>Link</code> HTTP header in the response to a request</li>
            <li>a <code>rel=package</code> <code>&lt;link&gt;</code> tag in an HTML document</li>
          </ul>
          <p>
            The <code>rel=package</code> link relation is described in <a href="#package-link-relation" class="sectionRef sec-ref">section <span class="secno">4.</span> <span class="sec-title">package Link Relation</span></a>.
          </p>
          <p>
            Package-aware caches <em class="rfc2119" title="SHOULD">SHOULD</em> delay requesting resources within the <a title="package scope" href="#dfn-package-scope" class="internalDFN">scope</a> of a package that they are downloading, until the package has been processed.
          </p>
          <p>
            If a package contains another package that is recognised by the package-aware cache, that package <em class="rfc2119" title="SHOULD">SHOULD</em> be used to populate the cache in the same way.
          </p>
          <p>
            If a package is in the Streamable Package Format (described in <a href="#streamable-package-format" class="sectionRef sec-ref">section <span class="secno">3.</span> <span class="sec-title">Streamable Package Format</span></a>), package-aware caches <em class="rfc2119" title="SHOULD">SHOULD</em> determine the cachability and other characteristics of each <a href="#dfn-part" class="internalDFN">part</a> of the package by examining (in order of priority):
          </p>
          <ol>
            <li>the <a href="#dfn-header" class="internalDFN">header</a> of the part</li>
            <li>the <a href="#dfn-package-header" class="internalDFN">package header</a></li>
            <li>the HTTP headers in the response for the package</li>
          </ol>
          <p>
            If a package is in the Streamable Package Format, package-aware caches should be aware that there may be multiple <a title="part" href="#dfn-part" class="internalDFN">parts</a> with the same <a href="#dfn-part-url" class="internalDFN">part URL</a> but with different types or languages. Caches should be populated with attention paid to the <code>Vary</code> header to determine which headers are significant. Package-aware caches <em class="rfc2119" title="SHOULD">SHOULD</em> only use the first <a href="#dfn-part" class="internalDFN">part</a> with the same content-negotiated characteristics.
          </p>
        </section>
      </section>
      <section id="installing-web-applications" typeof="bibo:Chapter" resource="#installing-web-applications" property="bibo:hasPart">
        <h3 id="h-installing-web-applications" resource="#h-installing-web-applications"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.2 </span>Installing Web Applications</span></h3>
        <p>
          Packages can be used to provide installable web applications, both within marketplaces and simply on the web.
        </p>
        <section id="example-scenario-1" typeof="bibo:Chapter" resource="#example-scenario-1" property="bibo:hasPart">
          <h4 id="h-example-scenario-1" resource="#h-example-scenario-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.2.1 </span>Example Scenario</span></h4>
          <p>
            In this scenario, a browser is pointed at <code>https://editor.example.com/</code>. It fetches the home page of the site, and sees:
          </p>
          <div class="example"><div class="example-title"><span>Example 3</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
    </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"package"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/editor.zip"</span><span class="pln"> </span><span class="atn">scope</span><span class="pun">=</span><span class="atv">"/"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"application/widget"</span><span class="tag">&gt;</span><span class="pln">
    ...
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  ...
</span><span class="tag">&lt;/html&gt;</span></pre></div>
          <p>
            The browser recognises that there is a <code>rel=package</code> link in the HTML page whose scope is the entirety of the website, and whose type is a package format that it recognises. It pops up a dialog to ask the user whether they would like to install the application locally, and downloads and installs it if the user agrees.
          </p>
        </section>
        <section id="guidelines-1" typeof="bibo:Chapter" resource="#guidelines-1" property="bibo:hasPart">
          <h4 id="h-guidelines-1" resource="#h-guidelines-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.2.2 </span>Guidelines</span></h4>
          <p>
            Package-aware installers <em class="rfc2119" title="SHOULD">SHOULD</em> prompt for the installation of packages that are indicated through:
          </p>
          <ul>
            <li>a <code>rel=package</code> <code>Link</code> HTTP header in the response to a request</li>
            <li>a <code>rel=package</code> <code>&lt;link&gt;</code> tag in an HTML document</li>
          </ul>
          <p>
            where:
          </p>
          <ol>
            <li>the <a title="package scope" href="#dfn-package-scope" class="internalDFN">package scope</a> is the same as the request URL</li>
            <li>the media type of the package is recognised by the installer</li>
          </ol>
          <p>
            The <code>rel=package</code> link relation is described in <a href="#package-link-relation" class="sectionRef sec-ref">section <span class="secno">4.</span> <span class="sec-title">package Link Relation</span></a>.
          </p>
          <p>
            If a package is in the Streamable Package Format (described in <a href="#streamable-package-format" class="sectionRef sec-ref">section <span class="secno">3.</span> <span class="sec-title">Streamable Package Format</span></a>), it <em class="rfc2119" title="SHOULD">SHOULD</em> include a <code>Link</code> header in the <a href="#dfn-package-header" class="internalDFN">package header</a> with <code>rel=describedby</code> to explicitly point to the resource within the package that describes the package. Alternatively, it <em class="rfc2119" title="SHOULD">SHOULD</em> use a <code>rel=start</code> or <code>rel=first</code> to point to the resource which is the starting point for the application (ie the initial page to load). Otherwise, the first <a href="#dfn-part" class="internalDFN">part</a> of the package should be a suitable starting point.
          </p>
        </section>
      </section>
      <section id="distributing-code-libraries" typeof="bibo:Chapter" resource="#distributing-code-libraries" property="bibo:hasPart">
        <h3 id="h-distributing-code-libraries" resource="#h-distributing-code-libraries"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.3 </span>Distributing Code Libraries</span></h3>
        <p>
          Packages can be used to distribute code libraries that are made up of multiple components (modules). For this to work smoothly, they need to be recognised by package management systems such as <a href="http://bower.io/">Bower</a>.
        </p>
        <section id="example-scenario-2" typeof="bibo:Chapter" resource="#example-scenario-2" property="bibo:hasPart">
          <h4 id="h-example-scenario-2" resource="#h-example-scenario-2"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.3.1 </span>Example Scenario</span></h4>
          <p>
            A developer wants to use a time-handling Javascript package within their own code. They point their package management system at the location of the Javascript package, <code>https://example.org/time.pack</code>. The package management system retrieves the package:
          </p>
          <div class="example"><div class="example-title"><span>Example 4</span></div><pre class="example">Content-Type: application/package
Link: &lt;component.json&gt;; rel=describedby

--p993fj39qp3aj8pjacda
Content-Location: component.json
Content-Type: application/json

... <em>package definition</em> ...

--p993fj39qp3aj8pjacda
Content-Location: time.js
Content-Type: text/javascript
Link: &lt;locale.pack&gt;; rel=package; scope=locale/

... <em>main Javascript</em> ...

--p993fj39qp3aj8pjacda
Content-Location: locale.pack
Content-Type: application/package

... <em>package of locale-specific data</em> ...

--p993fj39qp3aj8pjacda--</pre></div>
          <p>
            It unpacks the package into the relevant directory on the developer's machine, but also includes the package itself in the developer's file system so that the package can be referenced by the developer in the website itself:
          </p>
          <div class="example"><div class="example-title"><span>Example 5</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
    </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"package"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/scripts/utils/time.pack"</span><span class="pln"> </span><span class="atn">scope</span><span class="pun">=</span><span class="atv">"/scripts/utils/time"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"application/package"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"/scripts/utils/time.js"</span><span class="tag">&gt;&lt;/script&gt;</span><span class="pln">
    ...
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  ...
</span><span class="tag">&lt;/html&gt;</span></pre></div>
        </section>
        <section id="guidelines-2" typeof="bibo:Chapter" resource="#guidelines-2" property="bibo:hasPart">
          <h4 id="h-guidelines-2" resource="#h-guidelines-2"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.3.2 </span>Guidelines</span></h4>
          <p>
            Package managers that handle Streamable Package Format packages <em class="rfc2119" title="SHOULD">SHOULD</em> unpack nested packages; these indicate implicit dependencies within the package.
          </p>
          <p>
            Creators of Streamable Package Format packages for distribution <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> include a <code>Content-Location</code> header in the <a href="#dfn-package-header" class="internalDFN">package header</a> as this prevents them from being reused in other locations.
          </p>
        </section>
      </section>
      <section id="downloading-data-for-local-processing" typeof="bibo:Chapter" resource="#downloading-data-for-local-processing" property="bibo:hasPart">
        <h3 id="h-downloading-data-for-local-processing" resource="#h-downloading-data-for-local-processing"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.4 </span>Downloading Data For Local Processing</span></h3>
        <p>
          Data on the web often gains context from other, related, data and documentation. Packages can enable data reusers to quickly get hold of all the relevant data and documentation they need in a single, discoverable, bundle, while simultaneously making that data available directly on the web.
        </p>
        <div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note2"><span>Note</span></div><p class="">
          This pattern is of particular relevance to the <a href="https://www.w3.org/2013/csvw/wiki/Main_Page">CSV on the Web Working Group</a>.
        </p></div>
        <section id="example-scenario-3" typeof="bibo:Chapter" resource="#example-scenario-3" property="bibo:hasPart">
          <h4 id="h-example-scenario-3" resource="#h-example-scenario-3"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.4.1 </span>Example Scenario</span></h4>
          <p>
            An online news report references some recent demographic statistics, pointing to <code>http://example.org/stats/imd.csv</code>. When a data scientist happens on the reference, they fire up their data analysis application and points it at the URL. The HTTP response looks like:
          </p>
          <div class="example"><div class="example-title"><span>Example 6</span></div><pre class="example highligh">HTTP/1.1 200 OK
Content-Location: /stats/imd.csv
Content-Type: text/csv
Link: &lt;imd.pack&gt;; rel=package

... <em>CSV file</em> ...</pre></div>
          <p>
            The CSV file is standard CSV: it contains no metadata that describes the types or meaning of any of the columns that it contains, or about the codes that have been used to identify the geographies that the data covers. Fortunately, the data analysis application is package aware. It recognises the <code>rel=package</code> link and automatically downloads the package, which looks like:
          </p>
          <div class="example"><div class="example-title"><span>Example 7</span></div><pre class="example">Content-Location: http://example.org/stats/imd.pack
Content-Type: application/package
Link: &lt;datapackage.json&gt;; rel=describedby

--nu0hv0ag70eahoea0e0a
Content-Location: datapackage.json
Content-Type: application/json

... <em>machine-readable description of the package</em> ...

--nu0hv0ag70eahoea0e0a
Content-Location: imd.csv
Content-Type: text/csv

... <em>statistical data</em> ...

--nu0hv0ag70eahoea0e0a
Content-Location: geographies.csv
Content-Type: text/csv

... <em>data about the geographies covered by the statistics</em> ...

--nu0hv0ag70eahoea0e0a
Content-Location: imd.pdf
Content-Type: application/pdf

... <em>human-readable documentation of the data</em> ...

--nu0hv0ag70eahoea0e0a--</pre></div>
          <p>
            The data analysis application uses the information in <code>datapackage.json</code> to handle the types of the values in the original data correctly, and to display them with nice labels. It provides easy access to the linked information from <code>geographies.csv</code> and shows the data scientist the human-readable documentation that has been made available.
          </p>
        </section>
        <section id="guidelines-3" typeof="bibo:Chapter" resource="#guidelines-3" property="bibo:hasPart">
          <h4 id="h-guidelines-3" resource="#h-guidelines-3"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.4.2 </span>Guidelines</span></h4>
          <p>
            Package-aware data analysis software <em class="rfc2119" title="SHOULD">SHOULD</em> follow <code>rel=package</code> links in HTTP headers to access additional information about data that it retrieves by HTTP.
          </p>
          <p>
            Data publishers <em class="rfc2119" title="SHOULD">SHOULD</em> use the <code>Link</code> header to provide packages of information when individual (context-free) data files are requested.
          </p>
        </section>
      </section>
    </section>
    <section id="streamable-package-format" typeof="bibo:Chapter" resource="#streamable-package-format" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-streamable-package-format" resource="#h-streamable-package-format"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>Streamable Package Format</span></h2>
      <p>
        This section defines the Streamable Package Format (SPF) which has the media type <code>application/package</code>.
      </p>
      <div class="note"><div class="note-title" aria-level="3" role="heading" id="h-note3"><span>Note</span></div><p class="">
        SPF is designed to be consistent with <a href="http://tools.ietf.org/html/rfc2046#section-5.1">multipart media types</a>. However it is not defined as a <code>multipart/*</code> subtype because these types require the inclusion of a <code>boundary</code> parameter in their media type. Setting this parameter is burdensome in situations when the publisher is not able to configure the server. It is also unnecessary as the boundary can be ascertained from the content of the file.
      </p></div>
      <p>
        An example SPF file is as follows:
      </p>
      <div class="example"><div class="example-title"><span>Example 8</span></div><pre class="example">--gc0pJq0M:08jU534c0p
Content-Location: /index.html
Content-Type: text/html

&lt;html&gt;
  &lt;head&gt;
    &lt;script src="/scripts/app.js"&gt;&lt;/script&gt;
    ...
  &lt;/head&gt;
  ...
&lt;/html&gt;

--gc0pJq0M:08jU534c0p
Content-Location: /scripts/app.js
Content-Type: text/javascript

module Math from '/scripts/helpers/math.js';
...

--gc0pJq0M:08jU534c0p
Content-Location: /scripts/helpers/math.js
Content-Type: text/javascript

export function sum(nums) { ... }
...

--gc0pJq0M:08jU534c0p--</pre></div>
      <p>
        This SPF file includes three <a title="part" href="#dfn-part" class="internalDFN">parts</a> — <code>/index.html</code>, <code>/scripts/app.js</code> and <code>/scripts/helpers/math.js</code> — and uses the <a href="#dfn-boundary" class="internalDFN">boundary</a> <code>gc0pJq0M:08jU534c0p</code>.
      </p>
      <p>
        The general structure of an SPF file is described by the following [<cite><a class="bibref" href="#bib-ABNF">ABNF</a></cite>]:
      </p>
      <pre class="highlight prettyprint prettyprinted" style=""><span class="pln">spf  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> header CRLF </span><span class="pun">]</span><span class="pln">
       </span><span class="lit">1</span><span class="pun">*(</span><span class="pln"> part CRLF </span><span class="pun">)</span><span class="pln">
       </span><span class="str">"--"</span><span class="pln"> boundary </span><span class="str">"--"</span><span class="pln">

header </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*(</span><span class="pln"> message</span><span class="pun">-</span><span class="pln">header CRLF </span><span class="pun">)</span><span class="pln">

part </span><span class="pun">=</span><span class="pln"> </span><span class="str">"--"</span><span class="pln"> boundary CRLF
       </span><span class="pun">*(</span><span class="pln"> message</span><span class="pun">-</span><span class="pln">header CRLF </span><span class="pun">)</span><span class="pln">
       CRLF
       </span><span class="pun">[</span><span class="pln"> message</span><span class="pun">-</span><span class="pln">body </span><span class="pun">]</span><span class="pln">
      </span></pre>
      <section id="package-header" typeof="bibo:Chapter" resource="#package-header" property="bibo:hasPart">
        <h3 id="h-package-header" resource="#h-package-header"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.1 </span>Package Header</span></h3>
        <div class="issue"><div class="issue-title" aria-level="4" role="heading" id="h-issue2"><span>Issue 2</span></div><p class="">
          Should a package include a header for itself? Should it be in the same <code>message-header</code> format as is used elsewhere? This is flexible if somewhat verbose, and enables us to lean on well-known existing methods of expressing metadata rather than inventing a custom format.
        </p></div>
        <p>
          An SPF file <em class="rfc2119" title="MAY">MAY</em> start with an optional <dfn id="dfn-package-header">package header</dfn> that provides metadata about the package itself. The syntax of this header is the same as that of the header within each <a href="#dfn-part" class="internalDFN">part</a> of the package. See <a class="sectionRef sec-ref" href="#parts">section <span class="secno">3.2</span> <span class="sec-title">Parts</span></a> for details.
        </p>
        <p>
          An example package that includes a package header is shown below.
        </p>
        <div class="example"><div class="example-title"><span>Example 9</span></div><pre class="example">Content-Type: application/package
Content-Location: http://example.org/exampleWidget.pack
Link: &lt;config.xml&gt;; rel=describedby

--j38n02qryf9n0eqny8cq0
Content-Location: config.xml
Content-Type: application/xml

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;widget xmlns       = "http://www.w3.org/ns/widgets"
        id          = "http://example.org/exampleWidget"
        version     = "2.0 Beta"
        height      = "200"
        width       = "200"
        viewmodes   = "fullscreen"&gt;
...
&lt;/widget&gt;
... <em>other parts</em> ...
--j38n02qryf9n0eqny8cq0--</pre></div>
        <p>
          The package metadata explicitly:
        </p>
        <ul>
          <li>states that the file is a Streamable Package Format file through the <code>Content-Type</code> header</li>
          <li>indicates that the file originally came from <code>http://example.org/widget.pack</code> through the <code>Content-Location</code> header</li>
          <li>points to the part within the package the describes the package (the configuration document for the widget) through the <code>Link</code> header</li>
        </ul>
      </section>
      <section id="parts" typeof="bibo:Chapter" resource="#parts" property="bibo:hasPart">
        <h3 id="h-parts" resource="#h-parts"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.2 </span>Parts</span></h3>
        <p>
          A package file is comprised of a number of parts, separated by boundaries. Each <dfn id="dfn-part">part</dfn> comprises a <a href="#dfn-header" class="internalDFN">header</a> and a <a href="#dfn-body" class="internalDFN">body</a>.
        </p>
        <p>
          In ABNF, the definition of <code>message-header</code> and of <code>message-body</code> are taken from [<cite><a class="bibref" href="#bib-RFC2616">RFC2616</a></cite>] and are:
        </p>
        <pre class="highlight prettyprint prettyprinted" style=""><span class="pln">  message</span><span class="pun">-</span><span class="pln">header </span><span class="pun">=</span><span class="pln"> field</span><span class="pun">-</span><span class="pln">name </span><span class="str">":"</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> field</span><span class="pun">-</span><span class="pln">value </span><span class="pun">]</span><span class="pln">
  field</span><span class="pun">-</span><span class="pln">name     </span><span class="pun">=</span><span class="pln"> token
  field</span><span class="pun">-</span><span class="pln">value    </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*(</span><span class="pln"> field</span><span class="pun">-</span><span class="pln">content </span><span class="pun">|</span><span class="pln"> LWS </span><span class="pun">)</span><span class="pln">
  field</span><span class="pun">-</span><span class="pln">content  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">the </span><span class="typ">OCTETs</span><span class="pln"> making up the field</span><span class="pun">-</span><span class="pln">value
                   </span><span class="kwd">and</span><span class="pln"> consisting of either </span><span class="pun">*</span><span class="pln">TEXT </span><span class="kwd">or</span><span class="pln"> combinations
                   of token</span><span class="pun">,</span><span class="pln"> separators</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> quoted</span><span class="pun">-</span><span class="kwd">string</span><span class="pun">&gt;</span><span class="pln">

  message</span><span class="pun">-</span><span class="pln">body   </span><span class="pun">=</span><span class="pln"> entity</span><span class="pun">-</span><span class="pln">body
                   </span><span class="pun">|</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">entity</span><span class="pun">-</span><span class="pln">body encoded </span><span class="kwd">as</span><span class="pln"> per </span><span class="typ">Transfer</span><span class="pun">-</span><span class="typ">Encoding</span><span class="pun">&gt;</span><span class="pln">
  entity</span><span class="pun">-</span><span class="pln">body    </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">OCTET
        </span></pre>
        <p>
          The <dfn id="dfn-body">body</dfn> of a part can be any binary data. It <em class="rfc2119" title="MUST NOT">MUST NOT</em> include the <a href="#dfn-boundary" class="internalDFN">boundary</a> used in the package.
        </p>
        <p>
          The <dfn id="dfn-header">header</dfn> of a part follows the same syntax as the header for an HTTP response, and can reuse any HTTP header. This header <em class="rfc2119" title="MUST">MUST</em> include a <code>Content-Location</code> header which provides the <dfn id="dfn-part-url">part URL</dfn>. The URL provided by the <code>Content-Location</code> header <em class="rfc2119" title="MUST">MUST</em> be a <a href="http://url.spec.whatwg.org/#concept-relative-url">relative URL</a> and <em class="rfc2119" title="MUST NOT">MUST NOT</em> be a <a href="http://url.spec.whatwg.org/#concept-scheme-relative-url">scheme-relative URL</a>. The URL is resolved using a <a href="http://url.spec.whatwg.org/#concept-base-url">base URL</a> that is the location of the package. Other URLs used within the part header (for example in <code>Link</code> headers) or in the <a href="#dfn-body" class="internalDFN">body</a> of the part (for example within <code>src</code> attributes if the part is an HTML document) <em class="rfc2119" title="MUST">MUST</em> be resolved using the part URL as the base URL.
        </p>
        <p>
          Applications that process packages <em class="rfc2119" title="SHOULD">SHOULD</em> ignore parts which do not have a <code>Content-Location</code> header, or whose <code>Content-Location</code> header is not a relative URL or is a scheme-relative URL. Such parts contain information about resources from a different origin than the package itself, which might not be trustworthy.
        </p>
        <p>
          It is possible for multiple parts within a package to have the same <a href="#dfn-part-url" class="internalDFN">part URL</a>, either because they have exactly the same <code>Content-Location</code> header or because their <code>Content-Location</code> headers resolve to the same URL. Parts with the same part URL <em class="rfc2119" title="SHOULD">SHOULD</em> be distinguishable by having different values for other headers commonly used for content negotiation, such as <code>Content-Type</code> or <code>Content-Language</code>. When these headers are used to distinguish between parts, they <em class="rfc2119" title="SHOULD">SHOULD</em> be listed within the <code>Vary</code> header for the parts that share the same part URL. For example:
        </p>
        <div class="example"><div class="example-title"><span>Example 10</span></div><pre class="example">--r 87q0ewahn8o9fqrt0cadkm
Content-Location: /events/extensible-web-summit-2014
Content-Type: text/html
Vary: Content-Type

... <em>HTML page about the Extensible Web Summit 2014</em> ...

--r 87q0ewahn8o9fqrt0cadkm
Content-Location: /events/extensible-web-summit-2014
Content-Type: text/calendar
Vary: Content-Type

... <em>iCalendar event for the Extensible Web Summit 2014</em> ...

--r 87q0ewahn8o9fqrt0cadkm--</pre></div>
        <p>
          When a <a href="#dfn-part" class="internalDFN">part</a> is itself a Streamable Package Format package, its <a href="#dfn-package-header" class="internalDFN">package header</a> should become the <a title="header" href="#dfn-header" class="internalDFN">part header</a>. For example:
        </p>
        <div class="example"><div class="example-title"><span>Example 11</span></div><pre class="example">Content-Location: http://example.org/brand.pack

--uf8eanfueq8yr8x03qyx8fq
Content-Location: brand/main.css
Content-Type: text/css
Link: &lt;brand/font.pack&gt;; rel=package; scope=brand/font/

@font-face {
  font-family: 'BrandFont';
  src: url('font/brand.woff') format('woff')
       url('font/brand.ttf') format('truetype');
}
... <em>rest of the CSS</em> ...

--uf8eanfueq8yr8x03qyx8fq
Content-Location: brand/font.pack
Content-Type: application/package

--j808fd8apfhac;fe9a
Content-Location: font/brand.woff
Content-Type: application/font-woff

... <em>font in WOFF format</em> ...

--j808fd8apfhac;fe9a
Content-Location: font/brand.ttf
Content-Type: application/font-sfnt

... <em>font in Truetype format</em> ...

--j808fd8apfhac;fe9a--
--uf8eanfueq8yr8x03qyx8fq--</pre></div>
      </section>
      <section id="boundaries" typeof="bibo:Chapter" resource="#boundaries" property="bibo:hasPart">
        <h3 id="h-boundaries" resource="#h-boundaries"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.3 </span>Boundaries</span></h3>
        <p>
          A <dfn id="dfn-boundary">boundary</dfn> is used to separate the <a title="part" href="#dfn-part" class="internalDFN">parts</a> within the package. The same boundary is used throughout the package. The boundary used within an SPF file <em class="rfc2119" title="MUST NOT">MUST NOT</em> appear within the <a href="#dfn-body" class="internalDFN">body</a> of any part in the package. The boundary can be identified by an application by taking the string after the initial <code>"--"</code> of the first line that starts with a <code>"--"</code>.
        </p>
        <p>
          The definition of <code>boundary</code> is taken from [<cite><a class="bibref" href="#bib-RFC2046">RFC2046</a></cite>] and is:
        </p>
        <pre class="highlight prettyprint prettyprinted" style=""><span class="pln">boundary      </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">*</span><span class="lit">69bchars</span><span class="pln"> bcharsnospace

bchars        </span><span class="pun">=</span><span class="pln"> bcharsnospace </span><span class="pun">/</span><span class="pln"> </span><span class="str">" "</span><span class="pln">

bcharsnospace </span><span class="pun">=</span><span class="pln"> DIGIT </span><span class="pun">/</span><span class="pln"> ALPHA </span><span class="pun">/</span><span class="pln"> </span><span class="str">"'"</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">"("</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">")"</span><span class="pln"> </span><span class="pun">/</span><span class="pln">
                </span><span class="str">"+"</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">"_"</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">","</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">"-"</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">"."</span><span class="pln"> </span><span class="pun">/</span><span class="pln">
                </span><span class="str">"/"</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">"="</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="str">"?"</span><span class="pln">
        </span></pre>
        <p>
          Note that this places the restriction on the boundary that it must not be more than 70 characters long and it cannot end in a space character.
        </p>
      </section>
      <section id="fragment-identifiers" typeof="bibo:Chapter" resource="#fragment-identifiers" property="bibo:hasPart">
        <h3 id="h-fragment-identifiers" resource="#h-fragment-identifiers"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.4 </span>Fragment Identifiers</span></h3>
        <p>
          The fragment identifier scheme for the <code>application/package</code> media type can be used to identify a <a href="#dfn-part" class="internalDFN">part</a> of the package or a fragment of a part.
        </p>
        <div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note4"><span>Note</span></div><p class="">
          In general, links should be made directly to resources on the web rather than to parts of packages. The particular package(s) that a resource appears in may be an ephemeral phenomenon.
        </p></div>
        <p>
          The general syntax of a fragment identifier for Streamable Package Format documents is one or more <code><var>param</var>=<var>value</var></code> pairs, separated by semi-colons. In ABNF:
        </p>
        <pre class="highlight prettyprint prettyprinted" style=""><span class="pln">fragment      </span><span class="pun">=</span><span class="pln"> parameter </span><span class="pun">*(</span><span class="pln"> </span><span class="str">";"</span><span class="pln"> parameter </span><span class="pun">)</span><span class="pln">
parameter     </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="str">"url"</span><span class="pln"> </span><span class="str">"="</span><span class="pln"> value </span><span class="pun">)</span><span class="pln">
              </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="str">"rel"</span><span class="pln"> </span><span class="str">"="</span><span class="pln"> relation</span><span class="pun">-</span><span class="pln">type </span><span class="pun">)</span><span class="pln">
              </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="str">"type"</span><span class="pln"> </span><span class="str">"="</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> media</span><span class="pun">-</span><span class="pln">type </span><span class="pun">/</span><span class="pln"> quoted</span><span class="pun">-</span><span class="pln">mt </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
              </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="str">"lang"</span><span class="pln"> </span><span class="str">"="</span><span class="pln"> </span><span class="typ">Language</span><span class="pun">-</span><span class="typ">Tag</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
              </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="str">"fragment"</span><span class="pln"> </span><span class="str">"="</span><span class="pln"> value </span><span class="pun">)</span><span class="pln">

value         </span><span class="pun">=</span><span class="pln"> quoted</span><span class="pun">-</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">-</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">sc
quoted</span><span class="pun">-</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="pln">RFC2616</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln">
</span><span class="kwd">string</span><span class="pun">-</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">sc  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> any </span><span class="kwd">string</span><span class="pln"> that does </span><span class="kwd">not</span><span class="pln"> contain a semicolon </span><span class="pun">&gt;</span><span class="pln">
relation</span><span class="pun">-</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="pln">RFC5988</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln">
media</span><span class="pun">-</span><span class="pln">type    </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="pln">RFC5988</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln">
quoted</span><span class="pun">-</span><span class="pln">mt     </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="pln">RFC5988</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln">
</span><span class="typ">Language</span><span class="pun">-</span><span class="typ">Tag</span><span class="pln">  </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> </span><span class="kwd">defined</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="pln">RFC5646</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln">
        </span></pre>
        <p>
          Note that when used within a URL, some characters within the fragment identifier, such as <code>#</code>, should be escaped.
        </p>
        <p>
          The fragment identifier <em class="rfc2119" title="MUST">MUST</em> contain either a <code>url</code> parameter or a <code>rel</code> parameter and <em class="rfc2119" title="MUST NOT">MUST NOT</em> contain both of these parameters. These parameters are used to construct an initial list of <var>candidate parts</var> as follows:
        </p>
        <ol>
          <li>
            If the <code>url</code> parameter is specified, this is interpreted as a (possibly quoted) URL that is resolved relative to the base URL of the package to create a <var>candidate parts URL</var>. The <var>candidate parts</var> are those parts whose <a href="#dfn-part-url" class="internalDFN">part URL</a> is equal to the <var>candidate parts URL</var>.
          </li>
          <li>
            If the <code>rel</code> parameter is specified, the <a href="#dfn-package-header" class="internalDFN">package header</a> is examined for <code>Link</code> headers whose <code>rel</code> parameter is equal to the <code>rel</code> parameter of the fragment identifier. There may be several such <code>Link</code> headers, which are used to create a list of <var>candidate part URLs</var> by resolving the target URL of each link against the base URL of the package. The <var>candidate parts</var> are those parts whose <a href="#dfn-part-url" class="internalDFN">part URL</a> is equal to any of the <var>candidate part URLs</var>.
          </li>
        </ol>
        <p>
          If the <code>type</code> or <code>lang</code> parameters are specified in the fragment identifier, these are used to further narrow down the <var>candidate parts</var>:
        </p>
        <ol>
          <li>
            If the <code>type</code> parameter is specified, the <var>candidate parts</var> are filtered down to only those that have a <code>Content-Type</code> header whose media type matches the (possibly quoted) media type provided by the <code>type</code> parameter.
          </li>
          <li>
            If the <code>lang</code> parameter is specified, the <var>candidate parts</var> are further filtered down to only those that have a <code>Content-Language</code> header whose media type matches the language tag provided by the <code>lang</code> parameter.
          </li>
        </ol>
        <p>
          If there are no parts in the list of <var>candidate parts</var> then the fragment identifier does not identify any fragment of the package. Otherwise, the identified part is the first part within the list of <var>candidate parts</var>.
        </p>
        <p>
          If the fragment identifier specifies a <code>fragment</code> parameter, the value of that parameter is used to identify a fragment within the identified part, according to the media type for that part (as given by its <code>Content-Type</code> header).
        </p>
        <p>
          For example, the URL:
        </p>
        <div class="example"><div class="example-title"><span>Example 12</span></div><pre class="example">http://example.org/downloads/editor.pack#url=/root.html;fragment=colophon</pre></div>
        <p>
          refers to an element whose id is <code>colophon</code> within the part of the package whose <a href="#dfn-part-url" class="internalDFN">part URL</a> is <code>http://example.org/root.html</code>. This should be the same as:
        </p>
        <div class="example"><div class="example-title"><span>Example 13</span></div><pre class="example">http://example.org/root.html#colophon</pre></div>
        <p>
          As an example of using the <code>rel</code> and <code>type</code> parameters, imagine a package like:
        </p>
        <div class="example"><div class="example-title"><span>Example 14</span></div><pre class="example">Content-Location: http://example.org/downloads/spending.pack
Link: &lt;/metadata/spending&gt;; rel=describedby

--ux3pqy9qcpfmqfexptbv43q8p
Content-Location: /metadata/spending
Content-Type: text/turtle
Vary: Content-Type

... <var>Metadata about the package in Turtle format</var> ...

--ux3pqy9qcpfmqfexptbv43q8p
Content-Location: /metadata/spending
Content-Type: application/ld+json
Vary: Content-Type

... <var>Metadata about the package in JSON-LD format</var> ...

--ux3pqy9qcpfmqfexptbv43q8p--</pre></div>
        <p>
          The URL:
        </p>
        <div class="example"><div class="example-title"><span>Example 15</span></div><pre class="example">http://example.org/downloads/spending.pack#rel=describedby;type=application/ld+json</pre></div>
        <p>
          would identify the second of the parts in the package. The <code>rel=describedby</code> in the fragment identifier indicates that the target URL of the <code>Link</code> header should be used to locate the relevant part. Since there are two parts whose <a href="#dfn-part-url" class="internalDFN">part URL</a> is <code>http://example.org/metadata/spending</code>, the <code>type=application/ld+json</code> parameter is used to narrow the selection down to the second of the parts, whose <code>Content-Type</code> header matches.
        </p>
      </section>
      <section id="security-considerations" typeof="bibo:Chapter" resource="#security-considerations" property="bibo:hasPart">
        <h3 id="h-security-considerations" resource="#h-security-considerations"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.5 </span>Security Considerations</span></h3>
        <p>
          As it contains other files, Streamable Package Format files may contain active content (such as scripts) which, if run, may have devastating effects. Applications should treat all files contained within a package with the same care as they would if they had been received individually.
        </p>
        <p>
          Packages in the Streamable Package Format contain assertions about the content of resources at other locations on the web (indicated through the <a href="#dfn-part-url" class="internalDFN">part URL</a>). Applications that process files in the Streamable Package Format should be aware that the content might not match that at the part URL. <a href="#populating-caches" class="sectionRef sec-ref">section <span class="secno">2.1</span> <span class="sec-title">Populating Caches</span></a> discusses the implications of this when packages are used to populate caches.
        </p>
      </section>
      <section class="informative" id="creating-and-publishing-packages" typeof="bibo:Chapter" resource="#creating-and-publishing-packages" property="bibo:hasPart">
        <h3 id="h-creating-and-publishing-packages" resource="#h-creating-and-publishing-packages"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.6 </span>Creating and Publishing Packages</span></h3><p><em>This section is non-normative.</em></p>
        <p>
          This section contains some recommendations and guidelines for the creation of packages in the Streamable Package Format.
        </p>
        <section id="compression" typeof="bibo:Chapter" resource="#compression" property="bibo:hasPart">
          <h4 id="h-compression" resource="#h-compression"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.6.1 </span>Compression</span></h4>
          <p>
            Packages may be compressed in their entirety or the individual parts of the package may be compressed independently. In the latter case, the part headers should indicate the compression algorithm that has been used on the part during the packaging process using a <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-26#section-3.3.1"><code>Transfer-Encoding</code> header</a>.
          </p>
          <div class="issue"><div class="issue-title" aria-level="5" role="heading" id="h-issue3"><span>Issue 3</span></div><p class="">
            Not sure what to recommend here. Presumably compressing the entire file undermines its streamability so the recommendation should be to compress individual parts?
          </p></div>
        </section>
        <section id="part-ordering" typeof="bibo:Chapter" resource="#part-ordering" property="bibo:hasPart">
          <h4 id="h-part-ordering" resource="#h-part-ordering"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.6.2 </span>Part Ordering</span></h4>
          <p>
            The first part in a package should usually provide a starting point for understanding or making use of the other resources in the package. For example, it might be:
          </p>
          <ul>
            <li>a manifest file</li>
            <li>the root page for a web application</li>
            <li>the Javascript file into which the others are imported</li>
            <li>the table of contents of a digital publication</li>
            <li>the page that was the initial page crawled when creating a web archive</li>
          </ul>
          <p>
            The remaining parts should be ordered based on the priority with which they need to be loaded to enable the contents of the package to be used (with high priority parts earlier in the package), and based on the size of the part (with larger parts later in the package). For a web application, a suitable order might be:
          </p>
          <ol>
            <li>the root page of the web application</li>
            <li>set-up scripts &amp; data</li>
            <li>stylesheets</li>
            <li>fonts</li>
            <li>logo &amp; background images</li>
            <li>deferred scripts</li>
            <li>content images</li>
            <li>secondary HTML pages</li>
            <li>other resources used only on those HTML pages</li>
          </ol>
        </section>
        <section id="part-headers" typeof="bibo:Chapter" resource="#part-headers" property="bibo:hasPart">
          <h4 id="h-part-headers" resource="#h-part-headers"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.6.3 </span>Part Headers</span></h4>
          <p>
            As described in <a href="#parts" class="sectionRef sec-ref">section <span class="secno">3.2</span> <span class="sec-title">Parts</span></a>, you can provide any HTTP header for the parts within a package and must provide a <code>Content-Location</code> header. Some HTTP headers are inappropriate because the part is not, in fact, an HTTP response. Other HTTP headers that may be useful for applications are:
          </p>
          <ul>
            <li>
              <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-26#section-3.3.1"><code>Transfer-Encoding</code></a>, if the part has been individually compressed
            </li>
            <li>
              <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p2-semantics-26#section-7.1.4"><code>Vary</code></a>, if there are multiple parts with the same <a href="#dfn-part-url" class="internalDFN">part URL</a>
            </li>
            <li>
              <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p2-semantics-26#section-3.1.1.5"><code>Content-Type</code></a>, <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p2-semantics-26#section-3.1.2.2"><code>Content-Encoding</code></a> and/or <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p2-semantics-26#section-3.1.3.2"><code>Content-Language</code></a> to provide different metadata about the representation
            </li>
            <li>
              <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p6-cache-26#section-5.2"><code>Cache-Control</code></a> and/or <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p6-cache-26#section-5.3"><code>Expires</code></a> to control the caching of the individual parts
            </li>
            <li>
              <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p4-conditional-26#section-2.3"><code>ETag</code></a> and/or <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p4-conditional-26#section-2.2"><code>Last-Modified</code></a> to support subsequent conditional fetching of the resource
            </li>
            <li>
              <a href="http://tools.ietf.org/html/rfc5988#section-5"><code>Link</code></a> to indicate relationships between the file and other files in the package or on the web
            </li>
          </ul>
        </section>
      </section>
    </section>
    <section id="package-link-relation" typeof="bibo:Chapter" resource="#package-link-relation" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-package-link-relation" resource="#h-package-link-relation"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span><code>package</code> Link Relation</span></h2>
      <p>
        The <code>package</code> link relation refers to a package in which a representation of the link's context URL or related resources can be found. There are no constraints on the format of the package (the package may be a zip, or any of the other package formats listed in <a href="#intro" class="sectionRef"></a>, for example).
      </p>
      <div class="issue"><div class="issue-title" aria-level="3" role="heading" id="h-issue4"><span>Issue 4</span></div><p class="">
        Would it be helpful to distinguish between a package in which the link's context resource itself can be found, and one which only contains related resources?
      </p></div>
      <p>
        The <code>package</code> link relation can be used wherever link relations can be used, such as in links within web pages:
      </p>
      <div class="example"><div class="example-title"><span>Example 16</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"editor.gzip"</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"package"</span><span class="tag">&gt;</span><span class="pln">download this application</span><span class="tag">&lt;/a&gt;</span></pre></div>
      <p>
        or links within the header of an HTML page:
      </p>
      <div class="example"><div class="example-title"><span>Example 17</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"package"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://example.org/exampleWidget.zip"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"application/widget"</span><span class="tag">&gt;</span></pre></div>
      <p>
        or links within an HTTP header:
      </p>
      <div class="example"><div class="example-title"><span>Example 18</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="typ">Link</span><span class="pun">:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="str">/downloads/</span><span class="pln">spending</span><span class="pun">.</span><span class="pln">pack</span><span class="pun">&gt;;</span><span class="pln"> rel</span><span class="pun">=</span><span class="kwd">package</span><span class="pun">;</span><span class="pln"> type</span><span class="pun">=</span><span class="pln">application</span><span class="pun">/</span><span class="kwd">package</span></pre></div>
      <section id="package-scope" typeof="bibo:Chapter" resource="#package-scope" property="bibo:hasPart">
        <h3 id="h-package-scope" resource="#h-package-scope"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1 </span>Package Scope</span></h3>
        <p>
          When referring to a package, it is often useful to provide an indication of what the package contains so that an application retrieving the package can anticipate which resources it can get from the package rather than directly. This can be indicated by specifying a <dfn id="dfn-package-scope">package scope</dfn>, which is a URL. Applications can use this as a hint that indicates that any resources whose URL starts with the package scope can be found within the package. If no package scope is indicated in a link, applications <em class="rfc2119" title="MUST NOT">MUST NOT</em> make any assumptions about the contents of the package.
        </p>
        <p>
          In an HTML document, the <a href="#dfn-package-scope" class="internalDFN">package scope</a> is indicated through a <code>scope</code> attribute on the <code>&lt;a&gt;</code> or <code>&lt;link&gt;</code> element that references the package. This attribute contains a URL that is resolved against the base URL of the HTML document. For example:
        </p>
        <div class="example"><div class="example-title"><span>Example 19</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"editor.gzip"</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"package"</span><span class="pln"> </span><strong><span class="atn">scope</span><span class="pun">=</span><span class="atv">"/"</span></strong><span class="tag">&gt;</span><span class="pln">download this application</span><span class="tag">&lt;/a&gt;</span></pre></div>
        <p>
          indicates that the entire website that includes the page in which this link is found is contained within the package, while:
        </p>
        <div class="example"><div class="example-title"><span>Example 20</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"package"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://example.org/exampleWidget.zip"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"application/widget"</span><span class="pln"> </span><strong><span class="atn">scope</span><span class="pun">=</span><span class="atv">"http://example.org/exampleWidget/"</span></strong><span class="tag">&gt;</span></pre></div>
        <p>
          indicates that any resources whose URLs start with <code>http://example.org/exampleWidget/</code> can be found within <code>http://example.org/exampleWidget.zip</code>.
        </p>
        <p>
          In an HTTP <code>Link</code> header, the <a href="#dfn-package-scope" class="internalDFN">package scope</a> is indicated through a <code>scope</code> link extension. The value of this link extension has the same syntax and is resolved in the same way as the <code>anchor</code> parameter as defined in [<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>]. (In summary, it is a URL wrapped in double quotes, which is resolved against the requested URL.)
        </p>
        <p>
          For example if the response to a request to <code>http://example.org/data/spending-201405.csv</code> includes the header:
        </p>
        <div class="example"><div class="example-title"><span>Example 21</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="typ">Link</span><span class="pun">:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="str">/downloads/</span><span class="pln">spending</span><span class="pun">.</span><span class="pln">pack</span><span class="pun">&gt;;</span><span class="pln"> rel</span><span class="pun">=</span><span class="kwd">package</span><span class="pun">;</span><span class="pln"> type</span><span class="pun">=</span><span class="pln">application</span><span class="pun">/</span><span class="kwd">package</span><span class="pun">;</span><span class="pln"> </span><strong><span class="pln">scope</span><span class="pun">=</span><span class="str">"spending-"</span></strong></pre></div>
        <p>
          this implies that the package at <code>http://example.org/downloads/spending.pack</code> contains all resources whose URL begins with <code>http://example.org/data/spending-</code> (including the requested <code>http://example.org/data/spending-201405.csv</code>).
        </p>
      </section>
    </section>
    <section id="iana-considerations" typeof="bibo:Chapter" resource="#iana-considerations" property="bibo:hasPart">
      <!--OddPage--><h2 id="h-iana-considerations" resource="#h-iana-considerations"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span>IANA Considerations</span></h2>
      <section id="application-package-media-type-registration" typeof="bibo:Chapter" resource="#application-package-media-type-registration" property="bibo:hasPart">
        <h3 id="h-application-package-media-type-registration" resource="#h-application-package-media-type-registration"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.1 </span><code>application/package</code> Media Type Registration</span></h3>
        <p>
          This registration is for community review and will be submitted to the IESG for review, approval, and registration with IANA within the <a href="http://www.iana.org/assignments/media-types/">media type registry</a> in accordance with [<cite><a class="bibref" href="#bib-RFC6838">RFC6838</a></cite>].
        </p>
        <dl>
          <dt>Type name:</dt>
          <dd><code>application</code></dd>
          <dt>Subtype name:</dt>
          <dd><code>package</code></dd>
          <dt>Required parameters:</dt>
          <dd>none</dd>
          <dt>Optional parameters:</dt>
          <dd>none</dd>
          <dt>Encoding considerations:</dt>
          <dd>binary</dd>
          <dt>Security considerations:
          </dt><dd>See <a href="#security-considerations" class="sectionRef sec-ref">section <span class="secno">3.5</span> <span class="sec-title">Security Considerations</span></a></dd>
          <dt>Interoperability considerations:</dt>
          <dd>none</dd>
          <dt>Published specification:</dt>
          <dd><a href="">this document</a></dd>
          <dt>Applications that use this media type:</dt>
          <dd>no specific applications</dd>
          <dt>Fragment identifier considerations:</dt>
          <dd>See <a href="#fragment-identifiers" class="sectionRef sec-ref">section <span class="secno">3.4</span> <span class="sec-title">Fragment Identifiers</span></a></dd>
          <dt>Additional information:</dt>
          <dd>
            <dl>
              <dt>Deprecated alias names for this type:</dt>
              <dd>none</dd>
              <dt>Magic number(s):</dt>
              <dd>none</dd>
              <dt>File extension(s):</dt>
              <dd><code>pack</code></dd>
              <dt>Macintosh file type code(s):</dt>
              <dd>none</dd>
            </dl>
          </dd>
          <dt>Person &amp; email address to contact for further information:</dt>
          <dd>Jeni Tennison &lt;jeni@theodi.org&gt;</dd>
          <dt>Intended usage:</dt>
          <dd>COMMON</dd>
          <dt>Restrictions on usage:</dt>
          <dd>none</dd>
          <dt>Author:</dt>
          <dd>Jeni Tennison
          </dd><dt>Change controller:</dt>
          <dd><abbr title="World Wide Web Consortium">W3C</abbr></dd>
        </dl>
      </section>
      <section id="package-link-relation-registration" typeof="bibo:Chapter" resource="#package-link-relation-registration" property="bibo:hasPart">
        <h3 id="h-package-link-relation-registration" resource="#h-package-link-relation-registration"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.2 </span><code>package</code> Link Relation Registration</span></h3>
        <p>
          This registration is for community review and will be submitted to the IESG for review, approval, and registration with IANA within the <a href="https://www.iana.org/assignments/link-relations/">Registry of Link Relations</a> in accordance with [<cite><a class="bibref" href="#bib-RFC5988">RFC5988</a></cite>].
        </p>
        <dl>
          <dt>Relation name:</dt>
          <dd><code>package</code></dd>
          <dt>Description:</dt>
          <dd>Refers to a package in which a representation of the link's context or related resources can be found.</dd>
          <dt>Reference:</dt>
          <dd><a href="">this document</a></dd>
        </dl>
      </section>
    </section>
  


<section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart"><!--OddPage--><h2 id="h-references" resource="#h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>References</span></h2><section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart"><h3 id="h-normative-references" resource="#h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.1 </span>Normative references</span></h3><dl class="bibliography" resource=""><dt id="bib-ABNF">[ABNF]</dt><dd>D. Crocker, Ed.; P. Overell. <a href="https://tools.ietf.org/html/rfc5234" property="dc:requires"><cite>Augmented BNF for Syntax Specifications: ABNF</cite></a>. January 2008. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc5234" property="dc:requires">https://tools.ietf.org/html/rfc5234</a>
</dd><dt id="bib-RFC5988">[RFC5988]</dt><dd>M. Nottingham. <a href="https://tools.ietf.org/html/rfc5988" property="dc:requires"><cite>Web Linking</cite></a>. October 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5988" property="dc:requires">https://tools.ietf.org/html/rfc5988</a>
</dd></dl></section><section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" property="bibo:hasPart"><h3 id="h-informative-references" resource="#h-informative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.2 </span>Informative references</span></h3><dl class="bibliography" resource=""><dt id="bib-ECMASCRIPT">[ECMASCRIPT]</dt><dd><a href="http://www.ecma-international.org/ecma-262/6.0/index.html" property="dc:references"><cite>ECMA-262 ECMAScript 2015 Language Specification</cite></a>. URL: <a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-modules" property="dc:references">http://www.ecma-international.org/ecma-262/6.0/index.html</a>
</dd><dt id="bib-RFC2046">[RFC2046]</dt><dd>N. Freed; N. Borenstein. <a href="https://tools.ietf.org/html/rfc2046" property="dc:references"><cite>Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</cite></a>. November 1996. Draft Standard. URL: <a href="https://tools.ietf.org/html/rfc2046" property="dc:references">https://tools.ietf.org/html/rfc2046</a>
</dd><dt id="bib-RFC2616">[RFC2616]</dt><dd>R. Fielding; J. Gettys; J. Mogul; H. Frystyk; L. Masinter; P. Leach; T. Berners-Lee. <a href="https://tools.ietf.org/html/rfc2616" property="dc:references"><cite>Hypertext Transfer Protocol -- HTTP/1.1</cite></a>. June 1999. Draft Standard. URL: <a href="https://tools.ietf.org/html/rfc2616" property="dc:references">https://tools.ietf.org/html/rfc2616</a>
</dd><dt id="bib-RFC6838">[RFC6838]</dt><dd>N. Freed; J. Klensin; T. Hansen. <a href="https://tools.ietf.org/html/rfc6838" property="dc:references"><cite>Media Type Specifications and Registration Procedures</cite></a>. January 2013. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc6838" property="dc:references">https://tools.ietf.org/html/rfc6838</a>
</dd><dt id="bib-components-intro">[components-intro]</dt><dd>Dimitri Glazkov; Hayato Ito. <a href="http://www.w3.org/TR/components-intro/" property="dc:references"><cite>Introduction to Web Components</cite></a>. 24 July 2014. W3C Note. URL: <a href="http://www.w3.org/TR/components-intro/" property="dc:references">http://www.w3.org/TR/components-intro/</a>
</dd></dl></section></section></body></html>
